{"version":3,"sources":["../scripts.babel/popup.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;AAQb,SAAS,gBAAgB,CAAC,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE;;AAErD,QAAM,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,aAAa,EAAE;AACnD,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC7C,YAAM,CAAC,aAAa,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;KAC7D;GACF,CAAC,CAAC;;AAEH,MAAI,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;AAClC,QAAM,CAAC,aAAa,CAAC,MAAM,CACzB,qBAAqB,GAAG,gBAAgB,CAAC,OAAO,EAAE,EAClD;AACE,UAAM,EAAE,OAAO;AACf,aAAS,EAAE,wBAAwB;AACnC,WAAO,EAAE,KAAK;AACd,aAAS,EAAE,OAAO;GACnB,EACD,UAAU,cAAc,EAAE;AACxB,eAAW,CAAC,KAAK,EAAE,CAAC;GACrB,CACF,CAAC;CACH;;;;;;AAMD,SAAS,mBAAmB,CAAC,GAAG,EAAE;;AAEhC,MAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;AAC/B,MAAI,QAAQ,GAAG;AACb,OAAG,EAAE,GAAG;AACR,WAAO,EAAE,QAAQ;AACjB,kBAAc,EAAE,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAChE,oBAAgB,EAAE,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,OAAO;GACvD,CAAC;;AAEF,KAAG,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,GAAG,mCAAmC,CAAC,CAAC;AACvE,KAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;AACzD,KAAG,CAAC,kBAAkB,GAAG,YAAW;AAClC,QAAI,GAAG,CAAC,UAAU,KAAK,CAAC,EAAE;AACxB,UAAG,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;AACrB,eAAO,gBAAgB,CAAC,kBAAkB,EAAE,2HAA2H,EAAE,IAAI,CAAC,CAAC;OAChL;;AAED,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AACxC,UAAG,IAAI,CAAC,OAAO,EAAE;AACf,wBAAgB,CAAC,WAAW,EAAE,4GAA4G,EAAE,IAAI,CAAC,CAAC;OACnJ,MAAM;AACL,wBAAgB,CAAC,kBAAkB,EAAE,2HAA2H,EAAE,IAAI,CAAC,CAAC;OACzK;KACF;GACF,CAAC;AACF,KAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;CACpC;;;;;;AAMD,CAAC,CAAC,sBAAsB,CAAC,CAAC,KAAK,CAAC,YAAW;AACzC,QAAM,CAAC,IAAI,CAAC,KAAK,CACf,EAAC,QAAQ,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAC,EAC3C,UAAS,IAAI,EAAE;AACb,QAAG,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,EAAE;AACxD,yBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KAClC,MAAM;AACL,sBAAgB,CAAC,OAAO,EAAE,8HAA8H,CAAC,CAAC;KAC3J;GACF,CACF,CAAC;CACH,CAAC,CAAC;;;;;AAKH,SAAS,gBAAgB,GAAG;;;AAG1B,MAAI,UAAU,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC;AAClC,YAAU,CAAC,IAAI,EAAE,CAAC;AAClB,YAAU,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;;AAEvC,MAAI,SAAS,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;AAC9C,MAAI,OAAO,GAAG,CAAC,CAAC,iBAAiB,CAAC,CAAC;;AAEnC,MAAG,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE;AACjC,KAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;AAC5C,KAAC,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3B,WAAO;GACR;;AAED,MAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;AAC7B,KAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC;GACvB;;AAED,MAAG,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,OAAO,CAAC,GAAG,EAAE,KAAK,IAAI,IAAI,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;AAC3E,WAAO,iBAAiB,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,GAAG,EAAE,EAAE,SAAS,CAAC,CAAC;GACrE;;AAED,MAAI,WAAW,GAAG,IAAI,cAAc,EAAE,CAAC;AACvC,aAAW,CAAC,IAAI,CAAC,KAAK,EAAE,iBAAiB,GAAG,qBAAqB,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,uBAAuB,CAAC,CAAC;AAC/G,aAAW,CAAC,kBAAkB,GAAG,YAAW;AAC1C,QAAG,WAAW,CAAC,UAAU,KAAK,CAAC,EAAE;AAC/B,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;;AAEhD,UAAG,IAAI,CAAC,OAAO,EAAE;;AAEf,YAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,EAAE;AACvC,WAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAC5C,WAAC,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAChC,cAAI,OAAO,GAAG,CAAC,CAAC,iBAAiB,CAAC,CAAC;;;AAGnC,iBAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC;AACtC,cAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AAChD,mBAAO,CAAC,MAAM,CAAC,iBAAiB,GAAG,KAAK,GAAG,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,WAAW,CAAC,CAAC;WACpF,CAAC,CAAC;SACJ,MAAM;AACL,iBAAO,iBAAiB,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;SACpF;OAEF,MAAM;AACL,iBAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;OACxC;KACF;GACF,CAAC;AACF,aAAW,CAAC,IAAI,EAAE,CAAC;CAEpB;;AAED,SAAS,iBAAiB,CAAC,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE;AAC1D,MAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;AAC/B,KAAG,CAAC,IAAI,CAAC,KAAK,EAAE,iBAAiB,GAAG,qBAAqB,GAAG,UAAU,GAAG,GAAG,GAAG,QAAQ,CAAC,CAAC;AACzF,KAAG,CAAC,kBAAkB,GAAG,YAAW;AAClC,QAAI,GAAG,CAAC,UAAU,KAAK,CAAC,EAAE;AACxB,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;;AAExC,UAAG,IAAI,CAAC,OAAO,EAAE;AACf,iBAAS,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AACnC,YAAI,UAAU,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC;AAClC,kBAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;OAC3B,MAAM;AACL,iBAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;OACxC;AACD,OAAC,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC9B,UAAI,OAAO,GAAG,CAAC,CAAC,iBAAiB,CAAC,CAAC;AACnC,aAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC;AACtC,aAAO,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;AACjC,OAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;KAC3C;GACF,CAAC;AACF,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ;;AAED,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,YAAW;AAC9B,kBAAgB,EAAE,CAAC;AACnB,SAAO,KAAK,CAAC;CACd,CAAC,CAAC;;AAEH,CAAC,CAAC,qBAAqB,CAAC,CAAC,MAAM,CAAC,YAAW;AACzC,kBAAgB,EAAE,CAAC;AACnB,SAAO,KAAK,CAAC;CACd,CAAC,CAAC;;AAEH,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,YAAY;AACjC,MAAI,SAAS,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;AAC9C,WAAS,CAAC,KAAK,EAAE,CAAC;AAClB,WAAS,CAAC,MAAM,EAAE,CAAC;;AAEnB,MAAI;AACF,QAAI,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAC1C,QAAI,UAAU,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC;;AAElC,QAAG,MAAM,EAAE;AACT,gBAAU,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AACzC,gBAAU,CAAC,GAAG,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC;AAC9C,gBAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACnC,eAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;KACnB,MAAM;AACL,gBAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC;AACvD,gBAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KAChC;GACF,CAAC,OAAO,GAAG,EAAE;AACZ,WAAO,CAAC,GAAG,CAAC,cAAc,GAAI,GAAG,CAAC,CAAC;GACpC;AACD,WAAS,CAAC,IAAI,EAAE,CAAC;CAClB,CAAC,CAAC;;AAEH,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;AACnB,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC","file":"popup.js","sourcesContent":["'use strict';\n\n/***********************************************\n * Generic Show Notification Utility Function\n * @param title\n * @param message\n */\n\nfunction showNotification(title, message, popupWindow) {\n  // Clear Existing Notifications\n  chrome.notifications.getAll(function (notifications) {\n    for (var i = 0; i < notifications.length; i++) {\n      chrome.notifications.clear(notifications[i].notificationId);\n    }\n  });\n\n  var notificationDate = new Date();\n  chrome.notifications.create(\n    \"nkPopupNotification\" + notificationDate.getTime(),\n    {\n      'type': 'basic',\n      'iconUrl': '../images/icon-128.png',\n      'title': title,\n      'message': message\n    },\n    function (notificationId) {\n      popupWindow.close();\n    }\n  );\n}\n\n/**************************************\n * Submit Non-working URL to Netki Support\n * @param url Non-working URL\n */\nfunction submitNonWorkingUrl(url) {\n\n  var req = new XMLHttpRequest();\n  var postData = {\n    url: url,\n    browser: 'Chrome',\n    browserVersion: /Chrome\\/([0-9.]+)/.exec(navigator.userAgent)[1],\n    extensionVersion: chrome.runtime.getManifest().version\n  };\n\n  req.open('POST', NETKI_API_HOST + '/api/browsersupport/nonworkingurl');\n  req.setRequestHeader('Content-type', 'application/json');\n  req.onreadystatechange = function() {\n    if (req.readyState === 4) {\n      if(req.status !== 200) {\n        return showNotification('Submission Error', 'Unable to submit website to Netki, please try again later or e-mail opensource@netki.com to report a non-working website.', self);\n      }\n\n      var data = JSON.parse(req.responseText);\n      if(data.success) {\n        showNotification('Thank You', 'Thank you for letting us know that this website does not work with the Netki Wallet Name Lookup extension!', self);\n      } else {\n        showNotification('Submission Error', 'Unable to submit website to Netki, please try again later or e-mail opensource@netki.com to report a non-working website.', self);\n      }\n    }\n  };\n  req.send(JSON.stringify(postData));\n}\n\n/*****************************************\n * Get Tab URL and Submit, otherwise show\n * error notification.\n */\n$(\"a[name='notworking']\").click(function() {\n  chrome.tabs.query(\n    {'active': true, 'lastFocusedWindow': true},\n    function(tabs) {\n      if(tabs != null && tabs.length > 0 && tabs[0].url !== \"\") {\n        submitNonWorkingUrl(tabs[0].url);\n      } else {\n        showNotification('Error', 'Unable to get URL of problem website. Please try again later or e-mail opensource@netki.com to report a non-working website.');\n      }\n    }\n  );\n});\n\n/*****************************************\n * Lookup Wallet Name in Popup\n */\nfunction lookupWalletName() {\n\n  // Reset Copy Button\n  var copyButton = $(\"#copyButton\");\n  copyButton.hide();\n  copyButton.text('Copy Wallet Address');\n\n  var inputElem = $(\"input[name='lookupText']\");\n  var cSelect = $(\"#currencySelect\");\n\n  if(!isWalletName(inputElem.val())) {\n    $(\"#msgLi\").text(\"Not a valid Wallet Name\");\n    $(\"#msgLi\").slideDown(200);\n    return;\n  }\n\n  if($(\"#msgLi\").is(\":visible\")) {\n    $(\"#msgLi\").slideUp();\n  }\n\n  if(inputElem.val() !== \"\" && cSelect.val() !== null && cSelect.val() !== \"\") {\n    return resolveWalletName(inputElem.val(), cSelect.val(), inputElem);\n  }\n\n  var currencyReq = new XMLHttpRequest();\n  currencyReq.open('GET', NETKI_PUBAPI_HOST + '/api/wallet_lookup/' + inputElem.val() + '/available_currencies');\n  currencyReq.onreadystatechange = function() {\n    if(currencyReq.readyState === 4) {\n      var data = JSON.parse(currencyReq.responseText);\n\n      if(data.success) {\n\n        if(data.available_currencies.length > 1) {\n          $(\"#lookMeUp\").text(\"Get Currency Address\");\n          $(\"#currencyLi\").slideDown(200);\n          var cSelect = $(\"#currencySelect\");\n\n          // Clear Select if previously used\n          cSelect.find(\"option\").remove().end();\n          data.available_currencies.forEach(function(value) {\n            cSelect.append(\"<option value='\" + value + \"'>\" + SHORTCODES[value] + \"</option>\");\n          });\n        } else {\n          return resolveWalletName(inputElem.val(), data.available_currencies[0], inputElem);\n        }\n\n      } else {\n        inputElem.val('Wallet Name Not Found');\n      }\n    }\n  };\n  currencyReq.send();\n\n}\n\nfunction resolveWalletName(walletName, currency, inputElem) {\n  var req = new XMLHttpRequest();\n  req.open('GET', NETKI_PUBAPI_HOST + '/api/wallet_lookup/' + walletName + '/' + currency);\n  req.onreadystatechange = function() {\n    if (req.readyState === 4) {\n      var data = JSON.parse(req.responseText);\n\n      if(data.success) {\n        inputElem.val(data.wallet_address);\n        var copyButton = $(\"#copyButton\");\n        copyButton.slideDown(200);\n      } else {\n        inputElem.val('Wallet Name Not Found');\n      }\n      $(\"#currencyLi\").slideUp(200);\n      var cSelect = $(\"#currencySelect\");\n      cSelect.find(\"option\").remove().end();\n      cSelect.prop(\"selectedIndex\", 0);\n      $(\"#lookMeUp\").text(\"Lookup Wallet Name\");\n    }\n  };\n  req.send();\n}\n\n$(\"#lookMeUp\").click(function() {\n  lookupWalletName();\n  return false;\n});\n\n$(\"form[name='lookup']\").submit(function() {\n  lookupWalletName();\n  return false;\n});\n\n$(\"#copyButton\").click(function () {\n  var inputElem = $(\"input[name='lookupText']\");\n  inputElem.focus();\n  inputElem.select();\n\n  try {\n    var copyOk = document.execCommand('copy');\n    var copyButton = $(\"#copyButton\");\n\n    if(copyOk) {\n      copyButton.text('Wallet Address Copied');\n      copyButton.css(\"background-color\", \"#4abc30\");\n      copyButton.delay(700).slideUp(200);\n      inputElem.val(\"\");\n    } else {\n      copyButton.parent().css(\"background-color\", \"#f05455\");\n      copyButton.text('Copy Failed');\n    }\n  } catch (err) {\n    console.log('Copy Error: ' +  err);\n  }\n  inputElem.blur();\n});\n\n$(\"#msgLi\").hide();\n$(\"#lookMeUp\").text(\"Lookup Wallet Name\");"]}